# Проектная работа 6 спринта

https://github.com/krvlr/Auth_sprint_1

В рамках данного репозитория реализованы следующие сервисы:

- Сервис авторизации

## Описание структуры репозитория:

1. `db` — раздел с настройками базы `PostgreSQL`.
2. `flask-auth` — раздел с описанием сервиса авторизации.
3. `nginx` — раздел с описанием настроек `nginx` для сервиса авторизации.

## Краткое описание архитектуры сервиса
---


## Пример запуска
---

Перед запуском контейнеров, в корне `/` необходимо создать файл `.env`:

    touch .env

А также указать в нем значения следующих переменных окружения:

    DEBUG
    DB_HOST
    DB_PORT
    DB_ENGINE
    DB_NAME
    DB_USER
    DB_PASSWORD
    REDIS_HOST
    REDIS_PORT

Теперь можно запустить сборку образа и запуск контейнеров:

    docker compose up -d --build

Чтобы остановить и полностью удалить контейнеры со всеми `volume` и `network`, описанными в рамках `docker-compose.yml`:

    docker-compose down --rmi all -v --remove-orphans

## Тестирование
---

Для запуска тестирования необходимо перейти в папку с тестами:

    cd flask-auth/tests/functional/

И запустить сборку образа и запуск контейнеров для тестирования:

    docker compose up --build

Если в логах будет сообщение об успешном прохождении тестирования - значит пришел успех!

## Настройка flake8 и pre-commit hook
---

Сформируем виртуальное `Python`-окружение в корне:

    python3 -m venv env

Активируем сформированное виртуальное `Python`-окружение:

    . env/bin/activate

Обновим `pip`:

    pip install --upgrade pip

Установим зависимости проекта:

    pip install -r requirements.txt

Установим `pre-commit hook`:

    pre-commit install

